import{a as be,b as we}from"./chunk-B3WZX5Z5.js";import{a as Se}from"./chunk-NX5QT64V.js";import{c as ie,e as ne}from"./chunk-4E2VJWSK.js";import{a as Pe}from"./chunk-TMQD5YC6.js";import{a as Ee}from"./chunk-4IIHAL6L.js";import{a as re,b as oe,d as le,e as de,f as se,g as ce,h as me,i as pe,l as _e,m as ve,n as ue,o as ge,p as xe,q as fe,u as he,x as Ce,y as ye}from"./chunk-IEVIATPJ.js";import{$a as b,Ea as L,Gb as Y,Ia as x,P as q,T as O,Tb as J,Ub as K,Va as m,Vb as X,Wa as n,Wb as Z,Xa as a,Xb as ee,Ya as p,Z as _,_ as v,a as k,ab as g,b as B,bb as s,bc as U,dc as te,fb as N,gb as W,hb as E,ib as R,jb as o,jc as ae,kb as h,lb as f,mb as z,nb as $,ob as S,pb as y,qb as w,rb as M,ta as T,tb as V,ua as l,wb as H,xb as G,ya as C,zb as Q}from"./chunk-X7ILVH5W.js";var Ie=(()=>{let c=class c{constructor(t,i){this.http=t,this.clientConfig=i,this.apiUrl=`${this.clientConfig.getApiUrl()}/files`,this.httpOptions={headers:new U(k({},this.clientConfig.getTenantHeader()))}}getPatientFiles(t){return this.http.get(`${this.apiUrl}/patient/${t}`,this.httpOptions)}uploadFile(t,i){let d=new FormData;d.append("file",i.file),d.append("category",i.category),i.description&&d.append("description",i.description);let u=new U(this.clientConfig.getTenantHeader());return this.http.post(`${this.apiUrl}/patient/${t}`,d,{headers:u})}downloadFile(t){return this.http.get(`${this.apiUrl}/${t}/download`,{responseType:"blob",headers:this.httpOptions.headers})}deleteFile(t){return this.http.delete(`${this.apiUrl}/${t}`,this.httpOptions)}getFilePreviewUrl(t){return`${this.apiUrl}/${t}/preview`}isValidFileType(t){return["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)}formatFileSize(t){if(t===0)return"0 Bytes";let i=1024,d=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(t)/Math.log(i));return parseFloat((t/Math.pow(i,u)).toFixed(2))+" "+d[u]}getFileIcon(t){return t.startsWith("image/")?"bi-file-image":t==="application/pdf"?"bi-file-pdf":t.includes("word")?"bi-file-word":"bi-file-earmark"}getCategoryColor(t){return{radiografia:"text-info",ecografia:"text-success",analitica:"text-warning",informe:"text-primary",otro:"text-secondary"}[t]||"text-secondary"}getCategoryName(t){return{radiografia:"Radiograf\xEDa",ecografia:"Ecograf\xEDa",analitica:"Anal\xEDtica",informe:"Informe M\xE9dico",otro:"Otro"}[t]||"Otro"}};c.\u0275fac=function(i){return new(i||c)(O(te),O(ae))},c.\u0275prov=q({token:c,factory:c.\u0275fac,providedIn:"root"});let r=c;return r})();var j=(r,c)=>({"text-dark":r,"text-white":c});function Me(r,c){r&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),o(3,"Cargando..."),a()(),n(4,"p",8),o(5,"Cargando detalles del paciente..."),a()())}function Ve(r,c){if(r&1&&(n(0,"p",59),o(1),a()),r&2){let e=s(2);l(),f("",e.calculateAge()," a\xF1os")}}function Ae(r,c){if(r&1&&(n(0,"div",27)(1,"label",28),o(2,"TEL\xC9FONO"),a(),n(3,"div")(4,"a",60),p(5,"i",61),o(6),a()()()),r&2){let e=s(2);l(4),m("href",M("tel:",e.patient.phone),T),l(2),f(" ",e.patient.phone," ")}}function Oe(r,c){if(r&1&&(n(0,"div",27)(1,"label",28),o(2,"TEL\xC9FONO 2"),a(),n(3,"div")(4,"a",60),p(5,"i",61),o(6),a()()()),r&2){let e=s(2);l(4),m("href",M("tel:",e.patient.phone2),T),l(2),f(" ",e.patient.phone2," ")}}function Ne(r,c){if(r&1&&(n(0,"div",27)(1,"label",28),o(2,"EMAIL"),a(),n(3,"div")(4,"a",60),p(5,"i",62),o(6),a()()()),r&2){let e=s(2);l(4),m("href",M("mailto:",e.patient.email),T),l(2),f(" ",e.patient.email," ")}}function Re(r,c){if(r&1&&(n(0,"div",27)(1,"label",28),o(2,"CONTACTO FAMILIAR"),a(),n(3,"div"),p(4,"i",63),o(5),a()()),r&2){let e=s(2);l(5),f(" ",e.patient.family_contact," ")}}function Ue(r,c){if(r&1&&(n(0,"div",27)(1,"label",28),o(2,"DNI"),a(),n(3,"div"),o(4),a()()),r&2){let e=s(2);l(4),f(" ",e.patient.dni," ")}}function je(r,c){if(r&1&&(n(0,"div",26)(1,"div",27)(2,"label",28),o(3,"FECHA DE NACIMIENTO"),a(),n(4,"div"),o(5),a()(),n(6,"div",27)(7,"label",28),o(8,"EDAD"),a(),n(9,"div"),o(10),a()()()),r&2){let e=s(2);l(5),h(e.formatDate(e.patient.birthDate)),l(5),f("",e.calculateAge()," a\xF1os")}}function Be(r,c){if(r&1&&(n(0,"div",26)(1,"div",64)(2,"label",28),o(3,"DIRECCI\xD3N"),a(),n(4,"div"),p(5,"i",65),o(6),a()(),n(7,"div",66)(8,"label",28),o(9,"CP"),a(),n(10,"div"),o(11),a()(),n(12,"div",66)(13,"label",28),o(14,"LOCALIDAD"),a(),n(15,"div"),o(16),a()(),n(17,"div",66)(18,"label",28),o(19,"PROVINCIA"),a(),n(20,"div"),o(21),a()()()),r&2){let e=s(2);l(6),f(" ",e.patient.address," "),l(5),h(e.patient.cp||"-"),l(5),h(e.patient.city||"-"),l(5),h(e.patient.province||"-")}}function qe(r,c){if(r&1&&(n(0,"div",26)(1,"div",49)(2,"label",28),o(3,"NOTAS"),a(),n(4,"div",67),o(5),a()()()),r&2){let e=s(2);l(5),h(e.patient.notes)}}function Le(r,c){if(r&1&&(n(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),o(4),a(),n(5,"small",42),o(6,"Total"),a()(),n(7,"div",70)(8,"div",72),o(9),a(),n(10,"small",42),o(11,"Usadas"),a()(),n(12,"div",70)(13,"div",73),o(14),a(),n(15,"small",42),o(16,"Activas"),a()()()()),r&2){let e=s(2);l(4),f("",e.getTotalSessions()," "),l(5),h(e.getUsedSessions()),l(5),f("",e.getRemainingSessions()," ")}}function We(r,c){if(r&1&&(n(0,"div")(1,"small",42),o(2,"\xDAltima actualizaci\xF3n:"),a(),p(3,"br"),n(4,"span",47),o(5),a()()),r&2){let e=s(2);l(5),h(e.formatDateTime(e.patient.updatedAt))}}function ze(r,c){if(r&1&&(n(0,"div",90),o(1),a()),r&2){let e=s(3);l(),$(" Original: ",e.newCredit.quantity||0," ",e.newCredit.type==="bono"?"bono(s)":"sesi\xF3n(es)"," de ",e.newCredit.minutes," min ")}}function $e(r,c){if(r&1){let e=b();n(0,"div",9)(1,"div",49)(2,"div",74)(3,"div",75)(4,"h5",23),p(5,"i",55),o(6," A\xF1adir sesiones o bonos "),a()(),n(7,"div",25)(8,"form",76,0),g("ngSubmit",function(){_(e);let i=s(2);return v(i.addCredits())}),n(10,"div",26)(11,"div",77)(12,"label",78),o(13,"Tipo *"),a(),n(14,"select",79),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.newCredit.type,i)||(d.newCredit.type=i),v(i)}),g("ngModelChange",function(){_(e);let i=s(2);return v(i.onFormValueChange())})("change",function(){_(e);let i=s(2);return v(i.onFormValueChange())}),n(15,"option",80),o(16,"Sesi\xF3n"),a(),n(17,"option",81),o(18,"Bono"),a()()(),n(19,"div",77)(20,"label",82),o(21,"Duraci\xF3n *"),a(),n(22,"select",83),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.newCredit.minutes,i)||(d.newCredit.minutes=i),v(i)}),g("ngModelChange",function(){_(e);let i=s(2);return v(i.onFormValueChange())})("change",function(){_(e);let i=s(2);return v(i.onFormValueChange())}),n(23,"option",84),o(24,"30 minutos (1/2h sesi\xF3n)"),a(),n(25,"option",85),o(26,"60 minutos (1h sesi\xF3n)"),a()()(),n(27,"div",77)(28,"label",86),o(29,"Cantidad *"),a(),n(30,"input",87),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.newCredit.quantity,i)||(d.newCredit.quantity=i),v(i)}),g("ngModelChange",function(){_(e);let i=s(2);return v(i.onFormValueChange())})("input",function(){_(e);let i=s(2);return v(i.onFormValueChange())}),a()(),n(31,"div",88)(32,"div",89)(33,"div",90),o(34,"Total a crear:"),a(),n(35,"div",91),o(36),a(),x(37,ze,2,3,"div",92),a()()(),n(38,"div",93)(39,"label",94),o(40,"Notas"),a(),n(41,"textarea",95),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.newCredit.notes,i)||(d.newCredit.notes=i),v(i)}),a()(),n(42,"div",93)(43,"div",96)(44,"input",97),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.newCredit.paid,i)||(d.newCredit.paid=i),v(i)}),a(),n(45,"label",98),p(46,"i",99),n(47,"strong"),o(48,"Pagado"),a()(),n(49,"div",100),o(50," Marcar si el pago de estas sesiones ya ha sido recibido "),a()()(),n(51,"div",101)(52,"button",102),p(53,"i",103),o(54," A\xF1adir "),a(),n(55,"button",104),g("click",function(){_(e);let i=s(2);return v(i.hideCreditForm())}),p(56,"i",105),o(57," Cancelar "),a()()()()()()()}if(r&2){let e=N(9),t=s(2);l(14),S("ngModel",t.newCredit.type),l(8),S("ngModel",t.newCredit.minutes),l(8),S("ngModel",t.newCredit.quantity),l(6),f(" ",t.equivalentSessions," sesiones de 1/2h (30 min) "),l(),m("ngIf",t.newCredit.type==="bono"||t.newCredit.minutes===60),l(4),S("ngModel",t.newCredit.notes),l(3),S("ngModel",t.newCredit.paid),l(8),m("disabled",!e.form.valid||t.loading)}}function He(r,c){r&1&&(n(0,"div",108)(1,"div",6)(2,"span",7),o(3,"Cargando..."),a()(),n(4,"p",109),o(5,"Cargando historial de citas..."),a()())}function Ge(r,c){r&1&&(n(0,"div",108),p(1,"i",110),n(2,"p",109),o(3,"No hay citas registradas para este paciente."),a()())}function Qe(r,c){if(r&1&&(n(0,"tr")(1,"td"),o(2),a(),n(3,"td"),o(4),a(),n(5,"td"),o(6),a()()),r&2){let e=c.$implicit;l(2),h(e.date),l(2),h(e.time),l(2),h(e.notes||"-")}}function Ye(r,c){if(r&1&&(n(0,"div")(1,"table",111)(2,"thead")(3,"tr")(4,"th"),o(5,"Fecha"),a(),n(6,"th"),o(7,"Hora"),a(),n(8,"th"),o(9,"Notas"),a()()(),n(10,"tbody"),x(11,Qe,7,3,"tr",112),a()()()),r&2){let e=s(3);l(11),m("ngForOf",e.appointments)}}function Je(r,c){if(r&1&&(n(0,"div",106),x(1,He,6,0,"div",107)(2,Ge,4,0,"div",107)(3,Ye,12,1,"div",4),a()),r&2){let e=s(2);l(),m("ngIf",e.loadingAppointments),l(),m("ngIf",!e.loadingAppointments&&e.appointments.length===0),l(),m("ngIf",!e.loadingAppointments&&e.appointments.length>0)}}function Ke(r,c){if(r&1&&(n(0,"div",42),p(1,"i",136),o(2),a()),r&2){let e=s(3);l(2),z(" ",e.selectedFile.name," (",e.formatFileSize(e.selectedFile.size),") ")}}function Xe(r,c){r&1&&p(0,"span",137)}function Ze(r,c){r&1&&p(0,"i",138)}function et(r,c){r&1&&(n(0,"div",139)(1,"div",6)(2,"span",7),o(3,"Cargando archivos..."),a()()())}function tt(r,c){if(r&1){let e=b();n(0,"img",162),g("error",function(i){_(e);let d=s(5);return v(d.onImageError(i))}),a()}if(r&2){let e=s().$implicit;m("src",e.storedPath,T)("alt",e.originalName)}}function it(r,c){if(r&1&&(n(0,"div",163),p(1,"i",164),a()),r&2){let e=s().$implicit,t=s(4);l(),R("bi "+t.getFileIcon(e.mimeType)+" text-primary")}}function nt(r,c){if(r&1&&(n(0,"p",165),o(1),a()),r&2){let e=s().$implicit;l(),f(" ",e.description," ")}}function at(r,c){if(r&1){let e=b();n(0,"div",142)(1,"div",143)(2,"div",25)(3,"div",144)(4,"div",145)(5,"div",146),x(6,tt,1,2,"img",147)(7,it,2,2,"div",148),a()(),n(8,"div",149)(9,"h6",150),o(10),a(),n(11,"div",46)(12,"span",151),o(13),a()(),x(14,nt,2,1,"p",152),n(15,"div",153)(16,"span",154),p(17,"i",155),o(18),H(19,"date"),a(),n(20,"span"),p(21,"i",156),o(22),a()()()(),n(23,"div",157)(24,"button",158),g("click",function(){let i=_(e).$implicit,d=s(4);return v(d.downloadFile(i))}),p(25,"i",159),a(),n(26,"button",160),g("click",function(){let i=_(e).$implicit,d=s(4);return v(d.deleteFile(i))}),p(27,"i",161),a()()()()()}if(r&2){let e=c.$implicit,t=s(4);l(6),m("ngIf",t.isImageFile(e.mimeType)),l(),m("ngIf",!t.isImageFile(e.mimeType)),l(2),m("title",e.originalName),l(),f(" ",e.originalName," "),l(2),R(t.getCategoryColor(e.category)+" bg-opacity-10 border"),l(),f(" ",t.getCategoryName(e.category)," "),l(),m("ngIf",e.description),l(4),f(" ",G(19,10,e.createdAt,"dd/MM/yyyy")," "),l(4),f(" ",t.formatFileSize(e.size)," ")}}function rt(r,c){if(r&1&&(n(0,"div")(1,"div",140),x(2,at,28,13,"div",141),a()()),r&2){let e=s(3);l(2),m("ngForOf",e.patientFiles)}}function ot(r,c){r&1&&(n(0,"div",166),p(1,"i",167),n(2,"p",168),o(3,"No hay archivos adjuntos"),a(),n(4,"p",47),o(5,"Sube el primer archivo usando el formulario de arriba"),a()())}function lt(r,c){if(r&1){let e=b();n(0,"div",113)(1,"div",114)(2,"div",22)(3,"h6",23),p(4,"i",115),o(5," Subir nuevo archivo "),a()(),n(6,"div",25)(7,"div",26)(8,"div",116)(9,"div",93)(10,"label",117),o(11,"Seleccionar archivo"),a(),n(12,"input",118),g("change",function(i){_(e);let d=s(2);return v(d.onFileSelected(i))}),a(),n(13,"div",100),o(14," Archivos permitidos: JPG, PNG, GIF, PDF, DOC, DOCX (m\xE1x. 10MB) "),a()()(),n(15,"div",116)(16,"div",93)(17,"label",119),o(18,"Categor\xEDa"),a(),n(19,"select",120),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.uploadCategory,i)||(d.uploadCategory=i),v(i)}),n(20,"option",121),o(21,"Radiograf\xEDa"),a(),n(22,"option",122),o(23,"Ecograf\xEDa"),a(),n(24,"option",123),o(25,"Anal\xEDtica"),a(),n(26,"option",124),o(27,"Informe M\xE9dico"),a(),n(28,"option",125),o(29,"Otro"),a()()()()(),n(30,"div",26)(31,"div",49)(32,"div",93)(33,"label",126),o(34,"Descripci\xF3n (opcional)"),a(),n(35,"textarea",127),w("ngModelChange",function(i){_(e);let d=s(2);return y(d.uploadDescription,i)||(d.uploadDescription=i),v(i)}),a()()()(),n(36,"div",128),x(37,Ke,3,2,"div",129),n(38,"button",130),g("click",function(){_(e);let i=s(2);return v(i.uploadFile())}),x(39,Xe,1,0,"span",131)(40,Ze,1,0,"i",132),o(41),a()()()(),n(42,"div",21)(43,"div",34)(44,"h6",23),p(45,"i",54),o(46," Archivos del paciente "),a(),n(47,"span",133),o(48),a()(),n(49,"div",25),x(50,et,4,0,"div",134)(51,rt,3,1,"div",4)(52,ot,6,0,"div",135),a()()()}if(r&2){let e=s(2);l(19),S("ngModel",e.uploadCategory),l(16),S("ngModel",e.uploadDescription),l(2),m("ngIf",e.selectedFile),l(),m("disabled",!e.selectedFile||e.uploading),l(),m("ngIf",e.uploading),l(),m("ngIf",!e.uploading),l(),f(" ",e.uploading?"Subiendo...":"Subir archivo"," "),l(7),h(e.patientFiles.length),l(2),m("ngIf",e.loadingFiles),l(),m("ngIf",!e.loadingFiles&&e.patientFiles.length>0),l(),m("ngIf",!e.loadingFiles&&e.patientFiles.length===0)}}function dt(r,c){if(r&1&&(n(0,"div",90),o(1),a()),r&2){let e=s().$implicit,t=s(4);l(),h(t.formatPrice(e))}}function st(r,c){if(r&1){let e=b();n(0,"div",191)(1,"input",192),g("change",function(){_(e);let i=s().$implicit,d=s(4);return v(d.togglePackPaymentStatus(i))}),a(),n(2,"label",193),o(3," Marcar pagado "),a()()}if(r&2){let e=s().$implicit;l(),m("id","paymentCheck_"+e.id),l(),m("for","paymentCheck_"+e.id)}}function ct(r,c){if(r&1){let e=b();n(0,"div",194)(1,"input",195),w("ngModelChange",function(i){_(e);let d=s(5);return y(d.editingUnitsRemaining,i)||(d.editingUnitsRemaining=i),v(i)}),a(),n(2,"div",196)(3,"button",197),g("click",function(){_(e);let i=s().$implicit,d=s(4);return v(d.saveUnitsRemaining(i))}),p(4,"i",198),a(),n(5,"button",199),g("click",function(){_(e);let i=s(5);return v(i.cancelEditingUnits())}),p(6,"i",200),a()()()}if(r&2){let e=s().$implicit,t=s(4);l(),S("ngModel",t.editingUnitsRemaining),m("min",0)("max",e.unitsTotal)}}function mt(r,c){if(r&1){let e=b();n(0,"div",201)(1,"span"),o(2),a(),n(3,"button",202),g("click",function(){_(e);let i=s().$implicit,d=s(4);return v(d.startEditingUnits(i))}),p(4,"i",203),a()()}if(r&2){let e=s().$implicit;l(2),h(e.unitsRemaining)}}function pt(r,c){if(r&1&&(n(0,"div",109)(1,"small",42),p(2,"i",204),o(3),a()()),r&2){let e=s().$implicit;l(3),f(" ",e.notes," ")}}function _t(r,c){if(r&1){let e=b();n(0,"div",27)(1,"div",174)(2,"div",25)(3,"div",175)(4,"div",176)(5,"h6",177),o(6),a(),x(7,dt,2,1,"div",92),n(8,"div",178)(9,"span",179),p(10,"i",180),o(11),a(),x(12,st,4,2,"div",181),a()(),n(13,"span",151),o(14),a()(),n(15,"div",182)(16,"div",70)(17,"div",90),o(18,"Total"),a(),n(19,"div",183),o(20),a()(),n(21,"div",70)(22,"div",90),o(23,"Restantes"),a(),x(24,ct,7,3,"div",184)(25,mt,5,1,"div",185),a(),n(26,"div",70)(27,"div",90),o(28,"Usados"),a(),n(29,"div",186),o(30),a()()(),n(31,"div",187),p(32,"div",188),a(),n(33,"div",128)(34,"small",42),o(35),a(),n(36,"button",189),g("click",function(){let i=_(e).$implicit,d=s(4);return v(d.deleteCreditPack(i.id))}),p(37,"i",161),a()(),x(38,pt,4,1,"div",190),a()()()}if(r&2){let e=c.$implicit,t=s(4);l(),E("border-success",e.unitsRemaining>0)("border-secondary",e.unitsRemaining===0),l(5),h(e.label),l(),m("ngIf",t.formatPrice(e)),l(2),E("bg-success",e.paid)("bg-warning",!e.paid)("text-dark",!e.paid),l(),E("bi-check-circle",e.paid)("bi-clock",!e.paid),l(),f(" ",e.paid?"Pagado":"Pendiente de pago"," "),l(),m("ngIf",!e.paid),l(),E("bg-primary",e.label.includes("Sesi\xF3n")&&e.unitsRemaining>0)("bg-success",e.label.includes("Bono")&&e.unitsRemaining>0)("bg-secondary",e.unitsRemaining===0),l(),f(" ",t.getCreditTypeLabel(e.label.includes("Sesi\xF3n")?"sesion":"bono")," "),l(6),h(e.unitsTotal),l(4),m("ngIf",t.isEditingPack(e.id)),l(),m("ngIf",!t.isEditingPack(e.id)),l(5),h(e.unitsTotal-e.unitsRemaining),l(2),W("width",e.unitsRemaining/e.unitsTotal*100,"%"),l(3),f(" Creado: ",t.formatDate(e.createdAt)," "),l(3),m("ngIf",e.notes)}}function vt(r,c){if(r&1){let e=b();n(0,"div")(1,"div",26)(2,"div",64)(3,"div",128)(4,"h6",23),o(5,"Packs de Sesiones"),a(),n(6,"button",171),g("click",function(){_(e);let i=s(3);return v(i.showCreditForm())}),p(7,"i",172),o(8," A\xF1adir Sesiones "),a()()()(),n(9,"div",26),x(10,_t,39,33,"div",173),a()()}if(r&2){let e=s(3);l(10),m("ngForOf",e.getCreditPacks())}}function ut(r,c){if(r&1){let e=b();n(0,"div",108),p(1,"i",205),n(2,"h5",206),o(3,"No hay Sesiones registradas"),a(),n(4,"p",93),o(5,"Este paciente no tiene packs de Sesiones asignados"),a(),n(6,"button",18),g("click",function(){_(e);let i=s(3);return v(i.showCreditForm())}),p(7,"i",207),o(8," A\xF1adir Primer Pack de Sesiones "),a()()}}function gt(r,c){if(r&1&&(n(0,"div",169),x(1,vt,11,1,"div",170)(2,ut,9,0,"ng-template",null,1,Q),a()),r&2){let e=N(3),t=s(2);l(),m("ngIf",t.getCreditPacks().length>0)("ngIfElse",e)}}function xt(r,c){if(r&1){let e=b();n(0,"div")(1,"div",9)(2,"div",10)(3,"div",11)(4,"h2",12),p(5,"i",13),o(6),a(),x(7,Ve,2,1,"p",14),a()(),n(8,"div",15)(9,"button",16),g("click",function(){_(e);let i=s();return v(i.goBack())}),p(10,"i",17),o(11," Volver "),a(),n(12,"button",18),g("click",function(){_(e);let i=s();return v(i.editPatient())}),p(13,"i",19),o(14," Editar "),a()()(),n(15,"div",9)(16,"div",20)(17,"div",21)(18,"div",22)(19,"h5",23),p(20,"i",24),o(21," Informaci\xF3n Personal "),a()(),n(22,"div",25)(23,"div",26)(24,"div",27)(25,"label",28),o(26,"NOMBRE COMPLETO"),a(),n(27,"div",29),o(28),a()(),x(29,Ae,7,3,"div",30)(30,Oe,7,3,"div",30)(31,Ne,7,3,"div",30)(32,Re,6,1,"div",30)(33,Ue,5,1,"div",30),a(),x(34,je,11,2,"div",31)(35,Be,22,4,"div",31)(36,qe,6,1,"div",31),a()()(),n(37,"div",32)(38,"div",33)(39,"div",34)(40,"h6",23),p(41,"i",35),o(42," Estad\xEDsticas "),a(),n(43,"button",36),g("click",function(){_(e);let i=s();return v(i.showCreditForm())}),p(44,"i",37),a()(),n(45,"div",25)(46,"div",38)(47,"div",39)(48,"div",40)(49,"div",41),o(50),a(),n(51,"small",42),o(52,"Citas"),a()()(),n(53,"div",39)(54,"div",43),o(55),a(),n(56,"small",42),o(57,"Sesiones"),a()()(),x(58,Le,17,3,"div",44),a()(),n(59,"div",21)(60,"div",22)(61,"h6",23),p(62,"i",45),o(63," Informaci\xF3n del Sistema "),a()(),n(64,"div",25)(65,"div",46)(66,"small",42),o(67,"Registrado:"),a(),p(68,"br"),n(69,"span",47),o(70),a()(),x(71,We,6,1,"div",4),a()()()(),x(72,$e,58,8,"div",48),n(73,"div",26)(74,"div",49)(75,"div",21)(76,"div",22)(77,"ul",50)(78,"li",51)(79,"button",52),g("click",function(){_(e);let i=s();return v(i.setActiveTab("historial-tab"))}),p(80,"i",53),o(81," Historial de Citas "),a()(),n(82,"li",51)(83,"button",52),g("click",function(){_(e);let i=s();return v(i.setActiveTab("archivos-tab"))}),p(84,"i",54),o(85," Archivos "),a()(),n(86,"li",51)(87,"button",52),g("click",function(){_(e);let i=s();return v(i.setActiveTab("creditos-tab"))}),p(88,"i",55),o(89," Sesiones "),a()()()(),n(90,"div",25)(91,"div"),x(92,Je,4,3,"div",56)(93,lt,53,11,"div",57)(94,gt,4,2,"div",58),a()()()()()()}if(r&2){let e=s();l(6),f(" ",e.getFullName()," "),l(),m("ngIf",e.patient.birthDate),l(21),h(e.getFullName()),l(),m("ngIf",e.patient.phone),l(),m("ngIf",e.patient.phone2),l(),m("ngIf",e.patient.email),l(),m("ngIf",e.patient.family_contact),l(),m("ngIf",e.patient.dni),l(),m("ngIf",e.patient.birthDate),l(),m("ngIf",e.patient.address),l(),m("ngIf",e.patient.notes),l(14),h((e.patient._count==null?null:e.patient._count.appointments)||0),l(5),f(" ",e.getActiveSessions()," "),l(3),m("ngIf",e.creditSummary==null?null:e.creditSummary.summary),l(12),h(e.formatDateTime(e.patient.createdAt)),l(),m("ngIf",e.patient.updatedAt!==e.patient.createdAt),l(),m("ngIf",e.showAddCreditForm),l(7),E("active",e.activeTab==="historial-tab"),m("ngClass",V(29,j,e.activeTab==="historial-tab",e.activeTab!=="historial-tab")),l(4),E("active",e.activeTab==="archivos-tab"),m("ngClass",V(32,j,e.activeTab==="archivos-tab",e.activeTab!=="archivos-tab")),l(4),E("active",e.activeTab==="creditos-tab"),m("ngClass",V(35,j,e.activeTab==="creditos-tab",e.activeTab!=="creditos-tab")),l(5),m("ngIf",e.activeTab==="historial-tab"),l(),m("ngIf",e.activeTab==="archivos-tab"),l(),m("ngIf",e.activeTab==="creditos-tab")}}function ft(r,c){if(r&1){let e=b();n(0,"div",5)(1,"div",93),p(2,"i",208),a(),n(3,"h4",42),o(4,"Paciente no encontrado"),a(),n(5,"p",42),o(6,"El paciente que buscas no existe o ha sido eliminado"),a(),n(7,"button",18),g("click",function(){_(e);let i=s();return v(i.goBack())}),p(8,"i",17),o(9," Volver a Pacientes "),a()()}}var Ot=(()=>{let c=class c{constructor(t,i,d,u,P,I,D,F,A,Te,De){this.route=t,this.router=i,this.patientService=d,this.creditService=u,this.configService=P,this.fileService=I,this.notificationService=D,this.cdr=F,this.utils=A,this.appointmentService=Te,this.eventBusService=De,this.patient=null,this.activeTab="historial-tab",this.creditSummary=null,this.showAddCreditForm=!1,this.loading=!1,this.loadingAppointments=!1,this.editingPackId=null,this.editingUnitsRemaining=0,this.patientFiles=[],this.loadingFiles=!1,this.selectedFile=null,this.uploadCategory="otro",this.uploadDescription="",this.uploading=!1,this.prices={sessionPrice30:30,sessionPrice60:55,bonoPrice30:135,bonoPrice60:248},this.newCredit={type:"sesion",quantity:1,minutes:30,paid:!1,notes:""}}ngOnInit(){console.log("PacienteDetalleComponent ngOnInit called");let t=this.route.snapshot.paramMap.get("id");console.log("Patient ID from route:",t),this.route.queryParams.subscribe(i=>{i.showCreditForm==="true"&&this.showCreditForm()}),t?(this.loadPatientData(t),this.loadCredits(t)):console.error("No patient ID found in route")}loadAppointments(t){console.log("\u{1F50D} Loading appointments for patient:",t),this.loadingAppointments=!0,this.appointmentService.getAppointmentsByPatient(t).subscribe({next:i=>{console.log("\u{1F4C5} Appointments received:",i.length,"appointments");let d=i.map(u=>B(k({},u),{date:u.start?u.start.split("T")[0]:"",time:u.start?u.start.split("T")[1]?.substring(0,5):"",notes:u.notes||""}));this.patient?(console.log("\u2705 Assigning",d.length,"appointments to patient"),this.patient.appointments=d):console.log("\u274C No patient object available for assignment"),this.loadingAppointments=!1,console.log("creditSummary:",this.creditSummary?.summary)},error:i=>{console.error("Error loading appointments:",i),this.loadingAppointments=!1}})}setActiveTab(t){this.activeTab=t}get appointments(){return this.patient?.appointments?this.patient.appointments.map(t=>{let i="-",d="-";if(t.start){let u=new Date(t.start);isNaN(u.getTime())||(i=u.toLocaleDateString("es-ES"),d=u.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))}return{date:i,time:d,notes:t.notes||"-"}}):[]}loadPatientData(t){console.log("Loading patient data for ID:",t),this.loading=!0,this.patientService.getPatientById(t).subscribe({next:i=>{console.log("Patient data loaded:",i),this.patient=i,this.loading=!1,this.loadPatientFiles(),this.loadAppointments(t)},error:i=>{console.error("Error loading patient:",i),this.loading=!1}})}loadCredits(t){this.creditService.getPatientCredits(t).subscribe({next:i=>{this.creditSummary=i},error:i=>{console.error("Error loading credits:",i)}})}showCreditForm(){this.showAddCreditForm=!0,this.resetNewCreditForm(),this.loadPricesForForm()}loadPricesForForm(){console.log("\u{1F504} Cargando precios de configuraci\xF3n..."),this.configService.getPrices().subscribe({next:t=>{console.log("\u2705 Precios cargados:",t),this.prices={sessionPrice30:t.sessionPrice30??30,sessionPrice60:t.sessionPrice60??55,bonoPrice30:t.bonoPrice30??135,bonoPrice60:t.bonoPrice60??248}},error:t=>{console.error("\u274C Error cargando precios, usando valores por defecto:",t)}})}hideCreditForm(){this.showAddCreditForm=!1,this.resetNewCreditForm()}resetNewCreditForm(){this.newCredit={type:"sesion",quantity:1,minutes:30,paid:!1,notes:""}}calculatePackPrice(){let t=this.newCredit.type,i=Number(this.newCredit.minutes),d=Number(this.newCredit.quantity)||1,u=0;if(t==="sesion")u=i===60?this.prices.sessionPrice60:this.prices.sessionPrice30;else{let P=i===60?this.prices.bonoPrice60:this.prices.bonoPrice30;return Math.round(P*100)}return Math.round(u*d*100)}createCreditPack(){if(!this.patient)return;let t=this.calculatePackPrice(),i={patientId:this.patient.id,type:this.newCredit.type==="sesion"?"sesion":"bono",minutes:Number(this.newCredit.minutes),quantity:Number(this.newCredit.quantity)||1,paid:!!this.newCredit.paid,notes:this.newCredit.notes||void 0,priceCents:t};console.log("createCreditPack request (normalized):",i),console.log("\u{1F4B0} Precio calculado:",t,"c\xE9ntimos (",(t/100).toFixed(2),"\u20AC)"),this.creditService.createCreditPack(i).subscribe({next:d=>{console.log("Credit pack created successfully:",d),this.hideCreditForm(),window.location.reload()},error:d=>{console.error("Error creating credit pack (detailed):",d);let u=d&&(d.error?.message||d.message||d.statusText||d.status)||"Error desconocido";this.notificationService.showError(`Error al crear pack: ${u}`)}})}deleteCreditPack(t){confirm("\xBFEst\xE1s seguro de que quieres eliminar este pack de cr\xE9ditos? Esta acci\xF3n eliminar\xE1 tambi\xE9n todos los consumos registrados del pack.")&&this.creditService.deleteCreditPack(t).subscribe({next:()=>{console.log("Credit pack deleted successfully"),this.notificationService.showSuccess("Pack de cr\xE9ditos eliminado correctamente"),window.location.reload()},error:i=>{console.error("Error deleting credit pack:",i),this.notificationService.showError("Error al eliminar el pack de cr\xE9ditos")}})}togglePackPaymentStatus(t){let i=!t.paid;if(!t.paid&&i){let u=`\xBFConfirma que desea marcar este ${t.label.includes("Bono")?"bono":"sesi\xF3n"} como PAGADO?

Pack: ${t.label}`;if(!confirm(u))return}this.creditService.updatePackPaymentStatus(t.id,i).subscribe({next:()=>{t.paid=i,console.log(`Pack payment status updated to: ${i}`),this.eventBusService.notifyPackPaymentStatusChange({packId:t.id,paid:i,patientId:this.patient?.id||""}),this.patient?.id&&this.loadCredits(this.patient.id),this.notificationService.showSuccess(i?"Pack marcado como pagado":"Pack marcado como pendiente de pago")},error:d=>{console.error("Error updating pack payment status:",d),this.notificationService.showError("Error al actualizar el estado de pago")}})}getCreditPacks(){return(this.creditSummary?.creditPacks||[]).sort((i,d)=>new Date(d.createdAt).getTime()-new Date(i.createdAt).getTime())}getTotalCredits(){return this.creditSummary?.summary?.totalCreditsOriginal||0}getRemainingCredits(){return this.creditSummary?.summary?.totalCreditsRemaining||0}getUsedCredits(){return this.getTotalCredits()-this.getRemainingCredits()}getActiveSessions(){return this.getRemainingCredits()}goBack(){this.router.navigate(["/pacientes"])}formatDate(t){return typeof t=="string"?this.utils.formatDate(t):t instanceof Date?this.utils.formatDate(t.toISOString()):"Sin fecha"}calculateSessionMinutes(t,i,d){let u=d.label.includes("Sesi\xF3n"),P=d.label.includes("60"),I=30;P&&(I=u?60:30);let D=t*I,F=i*I,A=D-F;return{totalMinutes:D,remainingMinutes:F,usedMinutes:A}}startEditingUnits(t){this.editingPackId=t.id,this.editingUnitsRemaining=t.unitsRemaining}cancelEditingUnits(){this.editingPackId=null,this.editingUnitsRemaining=0}saveUnitsRemaining(t){if(this.editingUnitsRemaining<0||this.editingUnitsRemaining>t.unitsTotal){alert(`El valor debe estar entre 0 y ${t.unitsTotal}`);return}this.creditService.updatePackUnits(t.id,this.editingUnitsRemaining).subscribe({next:()=>{t.unitsRemaining=this.editingUnitsRemaining,this.cancelEditingUnits(),console.log("Unidades restantes actualizadas"),window.location.reload()},error:i=>{console.error("Error updating units:",i),alert("Error al actualizar las unidades restantes")}})}isEditingPack(t){return this.editingPackId===t}getFullName(){return this.patient?`${this.patient.firstName} ${this.patient.lastName}`:""}calculateAge(){if(!this.patient?.birthDate)return 0;let t=new Date,i=new Date(this.patient.birthDate),d=t.getFullYear()-i.getFullYear(),u=t.getMonth()-i.getMonth();return(u<0||u===0&&t.getDate()<i.getDate())&&d--,d}formatDateTime(t){return this.utils.formatDateTime(t)}getCreditTypeLabel(t){return this.utils.getCreditTypeLabel(t)}getMinutesLabel(t){return this.utils.getMinutesLabel(t)}formatPrice(t){let i=t?.priceCents??t?.price_cents??0;return i?(i/100).toFixed(i%100===0?0:2).replace(".",",")+" \u20AC":""}getTotalSessions(){return this.getTotalCredits()}getUsedSessions(){return this.getUsedCredits()}getRemainingSessions(){return this.getRemainingCredits()}addCredits(){this.createCreditPack()}onFormValueChange(){this.cdr.detectChanges()}get equivalentSessions(){if(!this.newCredit)return 0;let t=0;return this.newCredit.type==="bono"?Number(this.newCredit.minutes)===60?t=this.newCredit.quantity*10:t=this.newCredit.quantity*5:Number(this.newCredit.minutes)===60?t=this.newCredit.quantity*2:t=this.newCredit.quantity,t}loadPatientFiles(){this.patient&&(this.loadingFiles=!0,this.fileService.getPatientFiles(this.patient.id).subscribe({next:t=>{this.patientFiles=t,this.loadingFiles=!1,this.cdr.detectChanges()},error:t=>{console.error("Error loading patient files:",t),this.notificationService.showError("Error al cargar los archivos"),this.loadingFiles=!1}}))}onFileSelected(t){let i=t.target.files[0];i&&(this.fileService.isValidFileType(i)?i.size<=10*1024*1024?this.selectedFile=i:(this.notificationService.showError("El archivo es demasiado grande (m\xE1ximo 10MB)"),t.target.value=""):(this.notificationService.showError("Tipo de archivo no permitido"),t.target.value=""))}uploadFile(){if(!this.selectedFile||!this.patient)return;this.uploading=!0;let t={file:this.selectedFile,category:this.uploadCategory,description:this.uploadDescription||void 0};this.fileService.uploadFile(this.patient.id,t).subscribe({next:i=>{this.patientFiles.unshift(i),this.selectedFile=null,this.uploadDescription="",this.uploadCategory="otro",this.uploading=!1,this.notificationService.showSuccess("Archivo subido exitosamente");let d=document.getElementById("fileInput");d&&(d.value=""),this.cdr.detectChanges()},error:i=>{console.error("Error uploading file:",i),this.notificationService.showError("Error al subir el archivo"),this.uploading=!1}})}downloadFile(t){this.fileService.downloadFile(t.id).subscribe({next:i=>{let d=window.URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=t.originalName,u.click(),window.URL.revokeObjectURL(d)},error:i=>{console.error("Error downloading file:",i),this.notificationService.showError("Error al descargar el archivo")}})}deleteFile(t){confirm(`\xBFEst\xE1 seguro de que desea eliminar el archivo "${t.originalName}"?`)&&this.fileService.deleteFile(t.id).subscribe({next:()=>{this.patientFiles=this.patientFiles.filter(i=>i.id!==t.id),this.notificationService.showSuccess("Archivo eliminado exitosamente"),this.cdr.detectChanges()},error:i=>{console.error("Error deleting file:",i),this.notificationService.showError("Error al eliminar el archivo")}})}getFileIcon(t){return this.fileService.getFileIcon(t)}formatFileSize(t){return this.fileService.formatFileSize(t)}getCategoryColor(t){return this.fileService.getCategoryColor(t)}getCategoryName(t){return this.fileService.getCategoryName(t)}isImageFile(t){return t.startsWith("image/")}getFilePreviewUrl(t){return this.fileService.getFilePreviewUrl(t)}onImageError(t){console.error("Error loading image:",t),t.target.style.display="none"}togglePackSessions(t){console.log("togglePackSessions called for pack:",t)}isPackExpanded(t){return!1}editPatient(){this.patient&&this.router.navigate(["/pacientes"],{queryParams:{edit:this.patient.id}})}};c.\u0275fac=function(i){return new(i||c)(C(ie),C(ne),C(Ce),C(Se),C(Pe),C(Ie),C(ye),C(Y),C(Ee),C(be),C(we))},c.\u0275cmp=L({type:c,selectors:[["app-paciente-detalle"]],decls:4,vars:3,consts:[["creditForm","ngForm"],["noCredits",""],[1,"container-fluid"],["class","text-center my-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2","text-muted"],[1,"row","mb-4"],[1,"col-md-8"],[1,"patient-name-container"],[1,"patient-name"],[1,"bi","bi-person-fill"],["class","patient-age",4,"ngIf"],[1,"col-md-4","text-end"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"bi","bi-arrow-left","me-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil","me-2"],[1,"col-lg-8"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"bi","bi-person-vcard","me-2"],[1,"card-body"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","text-muted","small"],[1,"fw-medium"],["class","col-md-6 mb-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-4"],[1,"card","mb-3"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-graph-up","me-2"],["type","button","title","A\xF1adir Sesiones",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-plus-circle"],[1,"row","text-center"],[1,"col-6"],[1,"border-end"],[1,"h4","mb-0","text-primary"],[1,"text-muted"],[1,"h4","mb-0","text-info"],["class","mt-3 pt-3 border-top",4,"ngIf"],[1,"bi","bi-clock","me-2"],[1,"mb-2"],[1,"small"],["class","row mb-4",4,"ngIf"],[1,"col-12"],["role","tablist",1,"nav","nav-tabs","card-header-tabs"],["role","presentation",1,"nav-item"],["type","button","role","tab",1,"nav-link",3,"click","ngClass"],[1,"bi","bi-calendar-event","me-2"],[1,"bi","bi-files","me-2"],[1,"bi","bi-credit-card","me-2"],["id","citas-tab",4,"ngIf"],["id","archivos-tab",4,"ngIf"],["id","creditos-tab",4,"ngIf"],[1,"patient-age"],[1,"text-decoration-none",3,"href"],[1,"bi","bi-telephone","me-1"],[1,"bi","bi-envelope","me-1"],[1,"bi","bi-people","me-1"],[1,"col-12","mb-3"],[1,"bi","bi-geo-alt","me-1"],[1,"col-md-4","mb-2"],[1,"bg-light","p-3","rounded"],[1,"mt-3","pt-3","border-top"],[1,"row","text-center","small"],[1,"col-4"],[1,"text-success","fw-bold"],[1,"text-warning","fw-bold"],[1,"text-info","fw-bold"],[1,"card","border-primary"],[1,"card-header","bg-primary","text-white"],[3,"ngSubmit"],[1,"col-md-3","mb-3"],["for","creditType",1,"form-label"],["id","creditType","name","creditType","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value","sesion"],["value","bono"],["for","creditMinutes",1,"form-label"],["id","creditMinutes","name","creditMinutes","required","",1,"form-select",3,"ngModelChange","change","ngModel"],["value","30"],["value","60"],["for","creditQuantity",1,"form-label"],["type","number","id","creditQuantity","name","creditQuantity","required","","min","1","max","20","placeholder","Ej: 5",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-md-3","mb-3","d-flex","align-items-end"],[1,"w-100"],[1,"text-muted","small"],[1,"fw-bold","text-primary"],["class","text-muted small",4,"ngIf"],[1,"mb-3"],["for","creditNotes",1,"form-label"],["id","creditNotes","name","creditNotes","rows","2","placeholder","Notas adicionales sobre estas sesiones...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","id","creditPaid","name","creditPaid",1,"form-check-input",3,"ngModelChange","ngModel"],["for","creditPaid",1,"form-check-label"],[1,"bi","bi-credit-card-2-front","me-2"],[1,"form-text"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle","me-2"],["id","citas-tab"],["class","text-center text-muted py-4",4,"ngIf"],[1,"text-center","text-muted","py-4"],[1,"mt-2"],[1,"bi","bi-calendar-x","display-6"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["id","archivos-tab"],[1,"card","mb-4"],[1,"bi","bi-cloud-upload","me-2"],[1,"col-md-6"],["for","fileInput",1,"form-label"],["type","file","id","fileInput","accept",".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx",1,"form-control",3,"change"],["for","uploadCategory",1,"form-label"],["id","uploadCategory",1,"form-select",3,"ngModelChange","ngModel"],["value","radiografia"],["value","ecografia"],["value","analitica"],["value","informe"],["value","otro"],["for","uploadDescription",1,"form-label"],["id","uploadDescription","rows","2","placeholder","Describe el contenido del archivo...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","align-items-center"],["class","text-muted",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","bi bi-upload me-2",4,"ngIf"],[1,"badge","bg-secondary"],["class","text-center py-4",4,"ngIf"],["class","text-center text-muted py-5",4,"ngIf"],[1,"bi","bi-file-earmark","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-upload","me-2"],[1,"text-center","py-4"],[1,"row","g-3"],["class","col-lg-6",4,"ngFor","ngForOf"],[1,"col-lg-6"],[1,"card","border","h-100"],[1,"d-flex","align-items-start"],[1,"me-3","flex-shrink-0"],[1,"file-preview-container"],["class","img-thumbnail file-preview","style","width: 60px; height: 60px; object-fit: cover;",3,"src","alt","error",4,"ngIf"],["class","file-icon-container d-flex align-items-center justify-content-center","style","width: 60px; height: 60px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 0.375rem;",4,"ngIf"],[1,"flex-grow-1","min-width-0"],[1,"card-title","mb-1","text-truncate",3,"title"],[1,"badge"],["class","card-text text-muted small mb-2",4,"ngIf"],[1,"d-flex","align-items-center","text-muted","small"],[1,"me-3"],[1,"bi","bi-calendar3","me-1"],[1,"bi","bi-file-earmark","me-1"],[1,"mt-3","d-flex","gap-2"],["type","button","title","Descargar archivo",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-download"],["type","button","title","Eliminar archivo",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],[1,"img-thumbnail","file-preview",2,"width","60px","height","60px","object-fit","cover",3,"error","src","alt"],[1,"file-icon-container","d-flex","align-items-center","justify-content-center",2,"width","60px","height","60px","background-color","#f8f9fa","border","1px solid #dee2e6","border-radius","0.375rem"],[2,"font-size","24px"],[1,"card-text","text-muted","small","mb-2"],[1,"text-center","text-muted","py-5"],[1,"bi","bi-file-earmark-x","display-6"],[1,"mt-3","mb-1"],["id","creditos-tab"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-1"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],[1,"card","h-100"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"d-flex","flex-column"],[1,"card-title","mb-1"],[1,"d-flex","gap-2","align-items-center"],[1,"badge","badge-sm"],[1,"bi","me-1"],["class","form-check form-check-inline mb-0",4,"ngIf"],[1,"row","text-center","mb-2"],[1,"fw-bold"],["class","d-flex flex-column align-items-center",4,"ngIf"],["class","fw-bold text-success d-flex flex-column align-items-center",4,"ngIf"],[1,"fw-bold","text-warning"],[1,"progress","mb-2",2,"height","8px"],[1,"progress-bar","bg-success"],["type","button","title","Eliminar pack",1,"btn","btn-sm","btn-outline-danger",3,"click"],["class","mt-2",4,"ngIf"],[1,"form-check","form-check-inline","mb-0"],["type","checkbox","title","Marcar como pagado",1,"form-check-input",3,"change","id"],[1,"form-check-label","small","text-muted",3,"for"],[1,"d-flex","flex-column","align-items-center"],["type","number",1,"form-control","form-control-sm","mb-1",2,"width","60px","text-align","center",3,"ngModelChange","ngModel","min","max"],[1,"btn-group","btn-group-sm"],["title","Guardar",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-check"],["title","Cancelar",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"bi","bi-x"],[1,"fw-bold","text-success","d-flex","flex-column","align-items-center"],["title","Editar cantidad restante",1,"btn","btn-outline-primary","btn-sm","mt-1",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-chat-text","me-1"],[1,"bi","bi-credit-card-2-front","display-6"],[1,"mt-3"],[1,"bi","bi-plus-circle","me-2"],[1,"bi","bi-person-x","display-1","text-muted"]],template:function(i,d){i&1&&(n(0,"div",2),x(1,Me,6,0,"div",3)(2,xt,95,38,"div",4)(3,ft,10,0,"div",3),a()),i&2&&(l(),m("ngIf",d.loading),l(),m("ngIf",!d.loading&&d.patient),l(),m("ngIf",!d.loading&&!d.patient))},dependencies:[ee,J,K,X,he,me,ve,ue,oe,pe,re,_e,le,de,fe,xe,ge,ce,se,Z],styles:[".patient-name-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:1rem}.patient-name[_ngcontent-%COMP%]{margin-bottom:0;color:#495057}.patient-age[_ngcontent-%COMP%]{margin-bottom:0;color:#6c757d;font-size:.9rem}.sessions-grid[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.session-item[_ngcontent-%COMP%]{border:1px solid #e9ecef;transition:all .2s ease}.session-item[_ngcontent-%COMP%]:hover{border-color:#dee2e6;box-shadow:0 1px 3px #0000001a}.session-item.bg-success-subtle[_ngcontent-%COMP%]{border-color:#a3d9a3}.card-body[_ngcontent-%COMP%]{transition:all .3s ease}.badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}.btn-group-sm[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem}.progress[_ngcontent-%COMP%]{background-color:#f8f9fa}.progress-bar[_ngcontent-%COMP%]{transition:width .3s ease}.file-preview[_ngcontent-%COMP%]{border-radius:.375rem;transition:transform .2s ease}.file-preview[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.file-icon-container[_ngcontent-%COMP%]{transition:background-color .2s ease}.file-icon-container[_ngcontent-%COMP%]:hover{background-color:#e9ecef!important}.file-preview-container[_ngcontent-%COMP%]{position:relative}.file-preview-container[_ngcontent-%COMP%]:hover   .file-preview[_ngcontent-%COMP%]{cursor:pointer}.badge.text-info[_ngcontent-%COMP%]{color:#0dcaf0!important;border-color:#0dcaf0!important}.badge.text-success[_ngcontent-%COMP%]{color:#198754!important;border-color:#198754!important}.badge.text-warning[_ngcontent-%COMP%]{color:#ffc107!important;border-color:#ffc107!important}.badge.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important;border-color:#0d6efd!important}.badge.text-secondary[_ngcontent-%COMP%]{color:#6c757d!important;border-color:#6c757d!important}.uploading-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.6}to{opacity:1}}"]});let r=c;return r})();export{Ot as PacienteDetalleComponent};
