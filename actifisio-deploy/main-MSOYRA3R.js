import{a as q,b as re,d as ie,e as oe,f as se,g as ae}from"./chunk-4E2VJWSK.js";import{Bb as J,C as d,Ea as B,Fb as j,J as b,La as K,M as l,N as x,P as C,Pa as X,Ra as N,S as V,T as R,U as w,V as H,Va as Y,Wa as f,Xa as m,Xb as Z,Ya as A,_b as D,a as W,ab as M,ca as $,ec as Q,f as T,fc as ee,gc as te,hb as P,hc as ne,i as O,jb as E,jc as ce,lb as G,q as u,ta as z,ua as g,x as c,y as _,ya as k}from"./chunk-X7ILVH5W.js";function ve(t){let n=t,i=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,e=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:e===0&&i!==0&&i%1e6===0&&r===0||!(e>=0&&e<=5)?4:5}var I=["es",[["a.\xA0m.","p.\xA0m."],void 0,void 0],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",ve];var ue=(()=>{let n=class n{constructor(r,e){this.router=r,this.clientConfig=e,this.title="Masaje Corporal Deportivo"}ngOnInit(){this.clientConfig.applyTheme(),this.clientConfig.setPageTitle();let r=this.clientConfig.getClientInfo();console.log("\u{1F3E2} Cliente cargado:",r.name),console.log("\u{1F3A8} Tema aplicado:",this.clientConfig.getTheme().primary),console.log("\u{1F511} Tenant Slug:",this.clientConfig.getTenantSlug())}navigateToAgenda(){this.router.navigate(["/agenda"])}navigateToPacientes(){this.router.navigate(["/pacientes"])}navigateToConfiguracion(){this.router.navigate(["/configuracion"])}navigateToInicio(){this.router.navigate(["/inicio"])}isCurrentRoute(r){return this.router.url.startsWith(r)}};n.\u0275fac=function(e){return new(e||n)(k(oe),k(ce))},n.\u0275cmp=B({type:n,selectors:[["app-root"]],decls:19,vars:9,consts:[[1,"container-fluid"],[1,"clinic-header"],[1,"container"],[1,"row","align-items-center"],[1,"col-md-8"],[1,"clinic-brand-btn",3,"click"],[1,"clinic-logo",3,"src","alt"],[1,"col-md-4","text-end"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-outline-light",3,"click"],[1,"main-content"]],template:function(e,o){e&1&&(f(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),M("click",function(){return o.navigateToInicio()}),A(6,"img",6),E(7),m()(),f(8,"div",7)(9,"div",8)(10,"button",9),M("click",function(){return o.navigateToAgenda()}),E(11," \u{1F4C5} Agenda "),m(),f(12,"button",9),M("click",function(){return o.navigateToPacientes()}),E(13," \u{1F465} Pacientes "),m(),f(14,"button",9),M("click",function(){return o.navigateToConfiguracion()}),E(15," \u2699\uFE0F Configuraci\xF3n "),m()()()()()(),f(16,"main",10)(17,"div",2),A(18,"router-outlet"),m()()()),e&2&&(g(6),Y("src",o.clientConfig.getAssets().logo,z)("alt",o.clientConfig.getClientInfo().name+" Logo"),g(),G(" ",o.clientConfig.getClientInfo().name," "),g(3),P("active",o.isCurrentRoute("/agenda")),g(2),P("active",o.isCurrentRoute("/pacientes")),g(2),P("active",o.isCurrentRoute("/configuracion")))},dependencies:[Z,ie,ae],styles:[".clinic-header[_ngcontent-%COMP%]{padding:1rem 0;margin-bottom:2rem}.clinic-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0;color:#fff;display:flex;align-items:center;gap:.75rem}.clinic-brand-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;font-weight:700;margin:0;color:#fff;display:flex;align-items:center;gap:.75rem;padding:.5rem;border-radius:.5rem;transition:all .3s ease;cursor:pointer;text-decoration:none}.clinic-brand-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;color:#f8f9fa;transform:translateY(-1px)}.clinic-brand-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(255,255,255,.5);outline-offset:2px}.clinic-brand-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.clinic-logo[_ngcontent-%COMP%]{height:2.5rem;width:auto;max-width:2.5rem;object-fit:contain}.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 200px)}.btn-group[_ngcontent-%COMP%]   .btn.active[_ngcontent-%COMP%]{background-color:#fff3;border-color:#ffffff80}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 6px #0000001a;border-radius:.75rem}@media (max-width: 768px){.clinic-header[_ngcontent-%COMP%]{padding:.5rem 0;margin-bottom:1rem}.btn-group[_ngcontent-%COMP%]{flex-direction:column}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:.25rem 0}}"]});let t=n;return t})();var U="Service workers are disabled or not supported by this browser",h=class{serviceWorker;worker;registration;events;constructor(n,i){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new T(r=>r.error(new l(5601,!1)));else{let r=null,e=new O;this.worker=new T(a=>(r!==null&&a.next(r),e.subscribe(S=>a.next(S))));let o=()=>{let{controller:a}=n;a!==null&&(r=a,e.next(r))};n.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(b(()=>n.getRegistration().then(a=>{if(!a)throw new l(5601,!1);return a})));let s=new O;this.events=s.asObservable();let p=a=>{let{data:S}=a;S?.type&&s.next(S)};n.addEventListener("message",p),i?.get(N,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",o),n.removeEventListener("message",p)})}}postMessage(n,i){return new Promise(r=>{this.worker.pipe(d(1)).subscribe(e=>{e.postMessage(W({action:n},i)),r()})})}postMessageWithOperation(n,i,r){let e=this.waitForOperationCompleted(r),o=this.postMessage(n,i);return Promise.all([o,e]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let i;return typeof n=="string"?i=r=>r.type===n:i=r=>n.includes(r.type),this.events.pipe(_(i))}nextEventOfType(n){return this.eventsOfType(n).pipe(d(1))}waitForOperationCompleted(n){return new Promise((i,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(_(e=>e.nonce===n),d(1),u(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).subscribe({next:i,error:r})})}get isEnabled(){return!!this.serviceWorker}},be=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new O;constructor(i){if(this.sw=i,!i.isEnabled){this.messages=c,this.notificationClicks=c,this.notificationCloses=c,this.pushSubscriptionChanges=c,this.subscription=c;return}this.messages=this.sw.eventsOfType("PUSH").pipe(u(e=>e.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(u(e=>e.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(u(e=>e.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(u(e=>e.data)),this.pushManager=this.sw.registration.pipe(u(e=>e.pushManager));let r=this.pushManager.pipe(b(e=>e.getSubscription()));this.subscription=new T(e=>{let o=r.subscribe(e),s=this.subscriptionChanges.subscribe(e);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(U));let r={userVisibleOnly:!0},e=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(e.length));for(let s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,p)=>{this.pushManager.pipe(b(v=>v.subscribe(r)),d(1)).subscribe({next:v=>{this.subscriptionChanges.next(v),s(v)},error:p})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(U));let i=r=>{if(r===null)throw new l(5602,!1);return r.unsubscribe().then(e=>{if(!e)throw new l(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,e)=>{this.subscription.pipe(d(1),b(i)).subscribe({next:r,error:e})})}decodeBase64(i){return atob(i)}static \u0275fac=function(r){return new(r||t)(R(h))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),Ce=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=c,this.unrecoverable=c;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(U));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let i=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new l(5601,!1));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}static \u0275fac=function(r){return new(r||t)(R(h))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();var de=new V("");function we(){let t=w(y);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=w(de),i=w(K),r=w(N);i.runOutsideAngular(()=>{let e=navigator.serviceWorker,o=()=>e.controller?.postMessage({action:"INITIALIZE"});e.addEventListener("controllerchange",o),r.onDestroy(()=>{e.removeEventListener("controllerchange",o)})}),i.runOutsideAngular(()=>{let e,{registrationStrategy:o}=t;if(typeof o=="function")e=new Promise(s=>o().subscribe(()=>s()));else{let[s,...p]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":e=Promise.resolve();break;case"registerWithDelay":e=le(+p[0]||0);break;case"registerWhenStable":e=Promise.race([r.whenStable(),le(+p[0])]);break;default:throw new l(5600,!1)}}e.then(()=>{r.destroyed||navigator.serviceWorker.register(n,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(x(5604,!1)))})})}function le(t){return new Promise(n=>setTimeout(n,t))}function Me(t,n){return new h(t.enabled!==!1?navigator.serviceWorker:void 0,n)}var y=class{enabled;updateViaCache;type;scope;registrationStrategy};function F(t,n={}){return H([be,Ce,{provide:de,useValue:t},{provide:y,useValue:n},{provide:h,useFactory:Me,deps:[y,$]},X(we)])}var ge=[{path:"",redirectTo:"/inicio",pathMatch:"full"},{path:"inicio",loadComponent:()=>import("./chunk-GX6TLSYS.js").then(t=>t.InicioComponent)},{path:"agenda",loadComponent:()=>import("./chunk-ZASFB5BL.js").then(t=>t.AgendaComponent)},{path:"pacientes",loadComponent:()=>import("./chunk-OYSP7I2A.js").then(t=>t.PacientesComponent)},{path:"pacientes/:id",loadComponent:()=>import("./chunk-MLVLGQVW.js").then(t=>t.PacienteDetalleComponent)},{path:"configuracion",loadComponent:()=>import("./chunk-ANGDLSND.js").then(t=>t.ConfiguracionComponent)},{path:"**",redirectTo:"/inicio"}];var fe=(()=>{let n=class n{intercept(r,e){let o=r.clone({setHeaders:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json; charset=utf-8","Accept-Charset":"utf-8"}});return e.handle(o)}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=C({token:n,factory:n.\u0275fac});let t=n;return t})();var me=(t,n)=>{if(!t.url.includes("/api/"))return n(t);let i=Ee();if(!i)return console.warn("[TenantInterceptor] No se pudo detectar tenant slug"),n(t);let r=t.clone({setHeaders:{"X-Tenant-Slug":i}});return console.log(`[TenantInterceptor] Agregando header X-Tenant-Slug: ${i}`),n(r)};function Ee(){let t=window.location.hostname;if(t.includes(".vercel.app")){let e=t.split(".")[0];return e.startsWith("clinic-frontend")?L():e}if(t==="localhost"||t==="127.0.0.1")return L();let i=t.replace("www.","").split(".");return i.length>0?i[0]:L()}function L(){return import.meta.env?.VITE_CLIENT_ID||"masajecorporaldeportivo"}D(I);var he={providers:[se(ge),re(),ee(ne(),te([me])),{provide:Q,useClass:fe,multi:!0},{provide:J,useValue:"es"},F("ngsw-worker.js",{enabled:!j(),registrationStrategy:"registerWhenStable:30000"}),F("ngsw-worker.js",{enabled:!j(),registrationStrategy:"registerWhenStable:30000"})]};D(I);q(ue,he).catch(t=>console.error(t));
